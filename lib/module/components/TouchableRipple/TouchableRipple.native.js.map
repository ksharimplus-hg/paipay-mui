{"version":3,"names":["React","Platform","StyleSheet","Pressable","getTouchableRippleColors","withInternalTheme","ANDROID_VERSION_LOLLIPOP","ANDROID_VERSION_PIE","TouchableRipple","style","background","borderless","disabled","disabledProp","rippleColor","underlayColor","children","theme","rest","showUnderlay","setShowUnderlay","useState","onPress","calculatedRippleColor","calculatedUnderlayColor","useForeground","OS","Version","handlePressIn","e","onPressIn","handlePressOut","onPressOut","supported","styles","overflowHidden","color","foreground","Children","only","backgroundColor","create","overflow"],"sources":["TouchableRipple.native.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport {\r\n\tPressableAndroidRippleConfig,\r\n\tStyleProp,\r\n\tPlatform,\r\n\tViewStyle,\r\n\tStyleSheet,\r\n\tPressable,\r\n\tGestureResponderEvent,\r\n} from 'react-native';\r\n\r\nimport { getTouchableRippleColors } from './utils';\r\nimport { withInternalTheme } from '../../core/theming';\r\nimport type { InternalTheme } from '../../types';\r\n\r\nconst ANDROID_VERSION_LOLLIPOP = 21;\r\nconst ANDROID_VERSION_PIE = 28;\r\n\r\ntype Props = React.ComponentProps<typeof Pressable> & {\r\n\tborderless?: boolean;\r\n\tbackground?: PressableAndroidRippleConfig;\r\n\tdisabled?: boolean;\r\n\tonPress?: (e: GestureResponderEvent) => void | null;\r\n\trippleColor?: string;\r\n\tunderlayColor?: string;\r\n\tchildren: React.ReactNode;\r\n\tstyle?: StyleProp<ViewStyle>;\r\n\ttheme: InternalTheme;\r\n};\r\n\r\nconst TouchableRipple = ({\r\n\tstyle,\r\n\tbackground,\r\n\tborderless = false,\r\n\tdisabled: disabledProp,\r\n\trippleColor,\r\n\tunderlayColor,\r\n\tchildren,\r\n\ttheme,\r\n\t...rest\r\n}: Props) => {\r\n\tconst [showUnderlay, setShowUnderlay] = React.useState<boolean>(false);\r\n\r\n\tconst disabled = disabledProp || !rest.onPress;\r\n\tconst { calculatedRippleColor, calculatedUnderlayColor } =\r\n\t\tgetTouchableRippleColors({\r\n\t\t\ttheme,\r\n\t\t\trippleColor,\r\n\t\t\tunderlayColor,\r\n\t\t});\r\n\r\n\t// A workaround for ripple on Android P is to use useForeground + overflow: 'hidden'\r\n\t// https://github.com/facebook/react-native/issues/6480\r\n\tconst useForeground =\r\n\t\tPlatform.OS === 'android' &&\r\n\t\tPlatform.Version >= ANDROID_VERSION_PIE &&\r\n\t\tborderless;\r\n\r\n\tconst handlePressIn = (e: GestureResponderEvent) => {\r\n\t\tsetShowUnderlay(true);\r\n\t\trest.onPressIn?.(e);\r\n\t};\r\n\r\n\tconst handlePressOut = (e: GestureResponderEvent) => {\r\n\t\tsetShowUnderlay(false);\r\n\t\trest.onPressOut?.(e);\r\n\t};\r\n\r\n\tif (TouchableRipple.supported) {\r\n\t\treturn (\r\n\t\t\t<Pressable\r\n\t\t\t\t{...rest}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tstyle={[borderless && styles.overflowHidden, style]}\r\n\t\t\t\tandroid_ripple={\r\n\t\t\t\t\tbackground != null\r\n\t\t\t\t\t\t? background\r\n\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\tcolor: calculatedRippleColor,\r\n\t\t\t\t\t\t\t\tborderless,\r\n\t\t\t\t\t\t\t\tforeground: useForeground,\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{React.Children.only(children)}\r\n\t\t\t</Pressable>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Pressable\r\n\t\t\t{...rest}\r\n\t\t\tdisabled={disabled}\r\n\t\t\tstyle={[\r\n\t\t\t\tborderless && styles.overflowHidden,\r\n\t\t\t\tshowUnderlay && { backgroundColor: calculatedUnderlayColor },\r\n\t\t\t\tstyle,\r\n\t\t\t]}\r\n\t\t\tonPressIn={handlePressIn}\r\n\t\t\tonPressOut={handlePressOut}\r\n\t\t>\r\n\t\t\t{React.Children.only(children)}\r\n\t\t</Pressable>\r\n\t);\r\n};\r\n\r\nTouchableRipple.supported =\r\n\tPlatform.OS === 'android' && Platform.Version >= ANDROID_VERSION_LOLLIPOP;\r\n\r\nconst styles = StyleSheet.create({\r\n\toverflowHidden: {\r\n\t\toverflow: 'hidden',\r\n\t},\r\n});\r\n\r\nexport default withInternalTheme(TouchableRipple);\r\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAGCC,QAAQ,EAERC,UAAU,EACVC,SAAS,QAEH,cAAc;AAErB,SAASC,wBAAwB,QAAQ,SAAS;AAClD,SAASC,iBAAiB,QAAQ,oBAAoB;AAGtD,MAAMC,wBAAwB,GAAG,EAAE;AACnC,MAAMC,mBAAmB,GAAG,EAAE;AAc9B,MAAMC,eAAe,GAAG,QAUX;EAAA,IAVY;IACxBC,KAAK;IACLC,UAAU;IACVC,UAAU,GAAG,KAAK;IAClBC,QAAQ,EAAEC,YAAY;IACtBC,WAAW;IACXC,aAAa;IACbC,QAAQ;IACRC,KAAK;IACL,GAAGC;EACG,CAAC;EACP,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGpB,KAAK,CAACqB,QAAQ,CAAU,KAAK,CAAC;EAEtE,MAAMT,QAAQ,GAAGC,YAAY,IAAI,CAACK,IAAI,CAACI,OAAO;EAC9C,MAAM;IAAEC,qBAAqB;IAAEC;EAAwB,CAAC,GACvDpB,wBAAwB,CAAC;IACxBa,KAAK;IACLH,WAAW;IACXC;EACD,CAAC,CAAC;;EAEH;EACA;EACA,MAAMU,aAAa,GAClBxB,QAAQ,CAACyB,EAAE,KAAK,SAAS,IACzBzB,QAAQ,CAAC0B,OAAO,IAAIpB,mBAAmB,IACvCI,UAAU;EAEX,MAAMiB,aAAa,GAAIC,CAAwB,IAAK;IAAA;IACnDT,eAAe,CAAC,IAAI,CAAC;IACrB,mBAAAF,IAAI,CAACY,SAAS,oDAAd,qBAAAZ,IAAI,EAAaW,CAAC,CAAC;EACpB,CAAC;EAED,MAAME,cAAc,GAAIF,CAAwB,IAAK;IAAA;IACpDT,eAAe,CAAC,KAAK,CAAC;IACtB,oBAAAF,IAAI,CAACc,UAAU,qDAAf,sBAAAd,IAAI,EAAcW,CAAC,CAAC;EACrB,CAAC;EAED,IAAIrB,eAAe,CAACyB,SAAS,EAAE;IAC9B,oBACC,oBAAC,SAAS,eACLf,IAAI;MACR,QAAQ,EAAEN,QAAS;MACnB,KAAK,EAAE,CAACD,UAAU,IAAIuB,MAAM,CAACC,cAAc,EAAE1B,KAAK,CAAE;MACpD,cAAc,EACbC,UAAU,IAAI,IAAI,GACfA,UAAU,GACV;QACA0B,KAAK,EAAEb,qBAAqB;QAC5BZ,UAAU;QACV0B,UAAU,EAAEZ;MACZ;IACH,IAEAzB,KAAK,CAACsC,QAAQ,CAACC,IAAI,CAACvB,QAAQ,CAAC,CACnB;EAEd;EAEA,oBACC,oBAAC,SAAS,eACLE,IAAI;IACR,QAAQ,EAAEN,QAAS;IACnB,KAAK,EAAE,CACND,UAAU,IAAIuB,MAAM,CAACC,cAAc,EACnChB,YAAY,IAAI;MAAEqB,eAAe,EAAEhB;IAAwB,CAAC,EAC5Df,KAAK,CACJ;IACF,SAAS,EAAEmB,aAAc;IACzB,UAAU,EAAEG;EAAe,IAE1B/B,KAAK,CAACsC,QAAQ,CAACC,IAAI,CAACvB,QAAQ,CAAC,CACnB;AAEd,CAAC;AAEDR,eAAe,CAACyB,SAAS,GACxBhC,QAAQ,CAACyB,EAAE,KAAK,SAAS,IAAIzB,QAAQ,CAAC0B,OAAO,IAAIrB,wBAAwB;AAE1E,MAAM4B,MAAM,GAAGhC,UAAU,CAACuC,MAAM,CAAC;EAChCN,cAAc,EAAE;IACfO,QAAQ,EAAE;EACX;AACD,CAAC,CAAC;AAEF,eAAerC,iBAAiB,CAACG,eAAe,CAAC"}