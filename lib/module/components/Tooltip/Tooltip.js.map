{"version":3,"names":["React","Dimensions","View","StyleSheet","Platform","getTooltipPosition","useInternalTheme","addEventListener","Portal","Text","Tooltip","children","enterTouchDelay","leaveTouchDelay","title","rest","theme","visible","setVisible","useState","measurement","setMeasurement","tooltip","measured","showTooltipTimer","useRef","hideTooltipTimer","childrenWrapperRef","touched","isWeb","OS","useEffect","current","clearTimeout","subscription","remove","handleOnLayout","nativeEvent","layout","measure","_x","_y","width","height","pageX","pageY","handleTouchStart","setTimeout","handleTouchEnd","mobilePressProps","onPress","useCallback","props","webPressProps","onHoverIn","onHoverOut","styles","backgroundColor","isV3","colors","onSurface","borderRadius","roundness","hidden","color","surface","cloneElement","ref","create","alignSelf","justifyContent","paddingHorizontal","maxHeight","opacity"],"sources":["Tooltip.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport {\r\n\tDimensions,\r\n\tView,\r\n\tLayoutChangeEvent,\r\n\tStyleSheet,\r\n\tPlatform,\r\n} from 'react-native';\r\n\r\nimport { getTooltipPosition, Measurement } from './utils';\r\nimport { useInternalTheme } from '../../core/theming';\r\nimport { addEventListener } from '../../utils/addEventListener';\r\nimport Portal from '../Portal/Portal';\r\nimport Text from '../Typography/Text';\r\n\r\nexport type Props = {\r\n\t/**\r\n\t * Tooltip reference element. Needs to be able to hold a ref.\r\n\t */\r\n\tchildren: React.ReactElement;\r\n\t/**\r\n\t * The number of milliseconds a user must touch the element before showing the tooltip.\r\n\t */\r\n\tenterTouchDelay?: number;\r\n\t/**\r\n\t * The number of milliseconds after the user stops touching an element before hiding the tooltip.\r\n\t */\r\n\tleaveTouchDelay?: number;\r\n\t/**\r\n\t * Tooltip title\r\n\t */\r\n\ttitle: string;\r\n};\r\n\r\n/**\r\n * Tooltips display informative text when users hover over, focus on, or tap an element.\r\n *\r\n * Plain tooltips, when activated, display a text label identifying an element, such as a description of its function. Tooltips should include only short, descriptive text and avoid restating visible UI text.\r\n *\r\n * <div class=\"screenshots\">\r\n *   <figure>\r\n *     <img class=\"small\" src=\"screenshots/tooltip.png\" />\r\n *   </figure>\r\n * </div>\r\n *\r\n * ## Usage\r\n * ```js\r\n * import * as React from 'react';\r\n * import { IconButton, Tooltip } from 'react-native-paper';\r\n *\r\n * const MyComponent = () => (\r\n *   <Tooltip title=\"Selected Camera\">\r\n *     <IconButton icon=\"camera\" selected size={24} onPress={() => {}} />\r\n *   </Tooltip>\r\n * );\r\n *\r\n * export default MyComponent;\r\n * ```\r\n */\r\nconst Tooltip = ({\r\n\tchildren,\r\n\tenterTouchDelay = 500,\r\n\tleaveTouchDelay = 1500,\r\n\ttitle,\r\n\t...rest\r\n}: Props) => {\r\n\tconst theme = useInternalTheme();\r\n\tconst [visible, setVisible] = React.useState(false);\r\n\r\n\tconst [measurement, setMeasurement] = React.useState({\r\n\t\tchildren: {},\r\n\t\ttooltip: {},\r\n\t\tmeasured: false,\r\n\t});\r\n\tconst showTooltipTimer = React.useRef<NodeJS.Timeout>();\r\n\tconst hideTooltipTimer = React.useRef<NodeJS.Timeout>();\r\n\tconst childrenWrapperRef = React.useRef() as React.MutableRefObject<View>;\r\n\tconst touched = React.useRef(false);\r\n\r\n\tconst isWeb = Platform.OS === 'web';\r\n\r\n\tReact.useEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tif (showTooltipTimer.current) {\r\n\t\t\t\tclearTimeout(showTooltipTimer.current);\r\n\t\t\t}\r\n\r\n\t\t\tif (hideTooltipTimer.current) {\r\n\t\t\t\tclearTimeout(hideTooltipTimer.current);\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst subscription = addEventListener(Dimensions, 'change', () =>\r\n\t\t\tsetVisible(false)\r\n\t\t);\r\n\r\n\t\treturn () => subscription.remove();\r\n\t}, []);\r\n\r\n\tconst handleOnLayout = ({ nativeEvent: { layout } }: LayoutChangeEvent) => {\r\n\t\tchildrenWrapperRef.current.measure(\r\n\t\t\t(_x, _y, width, height, pageX, pageY) => {\r\n\t\t\t\tsetMeasurement({\r\n\t\t\t\t\tchildren: { pageX, pageY, height, width },\r\n\t\t\t\t\ttooltip: { ...layout },\r\n\t\t\t\t\tmeasured: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleTouchStart = () => {\r\n\t\tif (hideTooltipTimer.current) {\r\n\t\t\tclearTimeout(hideTooltipTimer.current);\r\n\t\t}\r\n\r\n\t\tshowTooltipTimer.current = setTimeout(() => {\r\n\t\t\ttouched.current = true;\r\n\t\t\tsetVisible(true);\r\n\t\t}, enterTouchDelay) as unknown as NodeJS.Timeout;\r\n\t};\r\n\r\n\tconst handleTouchEnd = () => {\r\n\t\ttouched.current = false;\r\n\t\tif (showTooltipTimer.current) {\r\n\t\t\tclearTimeout(showTooltipTimer.current);\r\n\t\t}\r\n\r\n\t\thideTooltipTimer.current = setTimeout(() => {\r\n\t\t\tsetVisible(false);\r\n\t\t\tsetMeasurement({ children: {}, tooltip: {}, measured: false });\r\n\t\t}, leaveTouchDelay) as unknown as NodeJS.Timeout;\r\n\t};\r\n\r\n\tconst mobilePressProps = {\r\n\t\tonPress: React.useCallback(() => {\r\n\t\t\tif (touched.current) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn children.props.onPress?.();\r\n\t\t\t}\r\n\t\t}, [children.props]),\r\n\t};\r\n\r\n\tconst webPressProps = {\r\n\t\tonHoverIn: () => {\r\n\t\t\thandleTouchStart();\r\n\t\t\tchildren.props.onHoverIn?.();\r\n\t\t},\r\n\t\tonHoverOut: () => {\r\n\t\t\thandleTouchEnd();\r\n\t\t\tchildren.props.onHoverOut?.();\r\n\t\t},\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{visible && (\r\n\t\t\t\t<Portal>\r\n\t\t\t\t\t<View\r\n\t\t\t\t\t\tonLayout={handleOnLayout}\r\n\t\t\t\t\t\tstyle={[\r\n\t\t\t\t\t\t\tstyles.tooltip,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tbackgroundColor: theme.isV3\r\n\t\t\t\t\t\t\t\t\t? theme.colors.onSurface\r\n\t\t\t\t\t\t\t\t\t: theme.colors.tooltip,\r\n\t\t\t\t\t\t\t\t...getTooltipPosition(\r\n\t\t\t\t\t\t\t\t\tmeasurement as Measurement\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tborderRadius: theme.roundness,\r\n\t\t\t\t\t\t\t\t...(measurement.measured\r\n\t\t\t\t\t\t\t\t\t? styles.visible\r\n\t\t\t\t\t\t\t\t\t: styles.hidden),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\ttestID=\"tooltip-container\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\taccessibilityLiveRegion=\"polite\"\r\n\t\t\t\t\t\t\tnumberOfLines={1}\r\n\t\t\t\t\t\t\tselectable={false}\r\n\t\t\t\t\t\t\tvariant=\"labelLarge\"\r\n\t\t\t\t\t\t\tstyle={{ color: theme.colors.surface }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</Portal>\r\n\t\t\t)}\r\n\t\t\t<View\r\n\t\t\t\tonTouchStart={handleTouchStart}\r\n\t\t\t\tonTouchEnd={handleTouchEnd}\r\n\t\t\t\tonTouchCancel={handleTouchEnd}\r\n\t\t\t>\r\n\t\t\t\t{React.cloneElement(children, {\r\n\t\t\t\t\t...rest,\r\n\t\t\t\t\tref: childrenWrapperRef,\r\n\t\t\t\t\t...(isWeb ? webPressProps : mobilePressProps),\r\n\t\t\t\t})}\r\n\t\t\t</View>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n\ttooltip: {\r\n\t\talignSelf: 'flex-start',\r\n\t\tjustifyContent: 'center',\r\n\t\tpaddingHorizontal: 16,\r\n\t\theight: 32,\r\n\t\tmaxHeight: 32,\r\n\t},\r\n\tvisible: {\r\n\t\topacity: 1,\r\n\t},\r\n\thidden: {\r\n\t\topacity: 0,\r\n\t},\r\n});\r\n\r\nexport default Tooltip;\r\n"],"mappings":"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"}