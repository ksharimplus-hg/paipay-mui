{"version":3,"names":["React","Dimensions","View","StyleSheet","Platform","getTooltipPosition","useInternalTheme","addEventListener","Portal","Text","Tooltip","children","enterTouchDelay","leaveTouchDelay","title","rest","theme","visible","setVisible","useState","measurement","setMeasurement","tooltip","measured","showTooltipTimer","useRef","hideTooltipTimer","childrenWrapperRef","touched","isWeb","OS","useEffect","current","clearTimeout","subscription","remove","handleOnLayout","nativeEvent","layout","measure","_x","_y","width","height","pageX","pageY","handleTouchStart","setTimeout","handleTouchEnd","mobilePressProps","onPress","useCallback","props","webPressProps","onHoverIn","onHoverOut","styles","backgroundColor","isV3","colors","onSurface","borderRadius","roundness","hidden","color","surface","cloneElement","ref","create","alignSelf","justifyContent","paddingHorizontal","maxHeight","opacity"],"sources":["Tooltip.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n\tDimensions,\n\tView,\n\tLayoutChangeEvent,\n\tStyleSheet,\n\tPlatform,\n} from 'react-native';\n\nimport { getTooltipPosition, Measurement } from './utils';\nimport { useInternalTheme } from '../../core/theming';\nimport { addEventListener } from '../../utils/addEventListener';\nimport Portal from '../Portal/Portal';\nimport Text from '../Typography/Text';\n\nexport type Props = {\n\t/**\n\t * Tooltip reference element. Needs to be able to hold a ref.\n\t */\n\tchildren: React.ReactElement;\n\t/**\n\t * The number of milliseconds a user must touch the element before showing the tooltip.\n\t */\n\tenterTouchDelay?: number;\n\t/**\n\t * The number of milliseconds after the user stops touching an element before hiding the tooltip.\n\t */\n\tleaveTouchDelay?: number;\n\t/**\n\t * Tooltip title\n\t */\n\ttitle: string;\n};\n\n/**\n * Tooltips display informative text when users hover over, focus on, or tap an element.\n *\n * Plain tooltips, when activated, display a text label identifying an element, such as a description of its function. Tooltips should include only short, descriptive text and avoid restating visible UI text.\n *\n * <div class=\"screenshots\">\n *   <figure>\n *     <img class=\"small\" src=\"screenshots/tooltip.png\" />\n *   </figure>\n * </div>\n *\n * ## Usage\n * ```js\n * import * as React from 'react';\n * import { IconButton, Tooltip } from 'react-native-paper';\n *\n * const MyComponent = () => (\n *   <Tooltip title=\"Selected Camera\">\n *     <IconButton icon=\"camera\" selected size={24} onPress={() => {}} />\n *   </Tooltip>\n * );\n *\n * export default MyComponent;\n * ```\n */\nconst Tooltip = ({\n\tchildren,\n\tenterTouchDelay = 500,\n\tleaveTouchDelay = 1500,\n\ttitle,\n\t...rest\n}: Props) => {\n\tconst theme = useInternalTheme();\n\tconst [visible, setVisible] = React.useState(false);\n\n\tconst [measurement, setMeasurement] = React.useState({\n\t\tchildren: {},\n\t\ttooltip: {},\n\t\tmeasured: false,\n\t});\n\tconst showTooltipTimer = React.useRef<NodeJS.Timeout>();\n\tconst hideTooltipTimer = React.useRef<NodeJS.Timeout>();\n\tconst childrenWrapperRef = React.useRef() as React.MutableRefObject<View>;\n\tconst touched = React.useRef(false);\n\n\tconst isWeb = Platform.OS === 'web';\n\n\tReact.useEffect(() => {\n\t\treturn () => {\n\t\t\tif (showTooltipTimer.current) {\n\t\t\t\tclearTimeout(showTooltipTimer.current);\n\t\t\t}\n\n\t\t\tif (hideTooltipTimer.current) {\n\t\t\t\tclearTimeout(hideTooltipTimer.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tconst subscription = addEventListener(Dimensions, 'change', () =>\n\t\t\tsetVisible(false)\n\t\t);\n\n\t\treturn () => subscription.remove();\n\t}, []);\n\n\tconst handleOnLayout = ({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n\t\tchildrenWrapperRef.current.measure(\n\t\t\t(_x, _y, width, height, pageX, pageY) => {\n\t\t\t\tsetMeasurement({\n\t\t\t\t\tchildren: { pageX, pageY, height, width },\n\t\t\t\t\ttooltip: { ...layout },\n\t\t\t\t\tmeasured: true,\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\tconst handleTouchStart = () => {\n\t\tif (hideTooltipTimer.current) {\n\t\t\tclearTimeout(hideTooltipTimer.current);\n\t\t}\n\n\t\tshowTooltipTimer.current = setTimeout(() => {\n\t\t\ttouched.current = true;\n\t\t\tsetVisible(true);\n\t\t}, enterTouchDelay) as unknown as NodeJS.Timeout;\n\t};\n\n\tconst handleTouchEnd = () => {\n\t\ttouched.current = false;\n\t\tif (showTooltipTimer.current) {\n\t\t\tclearTimeout(showTooltipTimer.current);\n\t\t}\n\n\t\thideTooltipTimer.current = setTimeout(() => {\n\t\t\tsetVisible(false);\n\t\t\tsetMeasurement({ children: {}, tooltip: {}, measured: false });\n\t\t}, leaveTouchDelay) as unknown as NodeJS.Timeout;\n\t};\n\n\tconst mobilePressProps = {\n\t\tonPress: React.useCallback(() => {\n\t\t\tif (touched.current) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\treturn children.props.onPress?.();\n\t\t\t}\n\t\t}, [children.props]),\n\t};\n\n\tconst webPressProps = {\n\t\tonHoverIn: () => {\n\t\t\thandleTouchStart();\n\t\t\tchildren.props.onHoverIn?.();\n\t\t},\n\t\tonHoverOut: () => {\n\t\t\thandleTouchEnd();\n\t\t\tchildren.props.onHoverOut?.();\n\t\t},\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{visible && (\n\t\t\t\t<Portal>\n\t\t\t\t\t<View\n\t\t\t\t\t\tonLayout={handleOnLayout}\n\t\t\t\t\t\tstyle={[\n\t\t\t\t\t\t\tstyles.tooltip,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbackgroundColor: theme.isV3\n\t\t\t\t\t\t\t\t\t? theme.colors.onSurface\n\t\t\t\t\t\t\t\t\t: theme.colors.tooltip,\n\t\t\t\t\t\t\t\t...getTooltipPosition(\n\t\t\t\t\t\t\t\t\tmeasurement as Measurement\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tborderRadius: theme.roundness,\n\t\t\t\t\t\t\t\t...(measurement.measured\n\t\t\t\t\t\t\t\t\t? styles.visible\n\t\t\t\t\t\t\t\t\t: styles.hidden),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t\ttestID=\"tooltip-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\taccessibilityLiveRegion=\"polite\"\n\t\t\t\t\t\t\tnumberOfLines={1}\n\t\t\t\t\t\t\tselectable={false}\n\t\t\t\t\t\t\tvariant=\"labelLarge\"\n\t\t\t\t\t\t\tstyle={{ color: theme.colors.surface }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</View>\n\t\t\t\t</Portal>\n\t\t\t)}\n\t\t\t<View\n\t\t\t\tonTouchStart={handleTouchStart}\n\t\t\t\tonTouchEnd={handleTouchEnd}\n\t\t\t\tonTouchCancel={handleTouchEnd}\n\t\t\t>\n\t\t\t\t{React.cloneElement(children, {\n\t\t\t\t\t...rest,\n\t\t\t\t\tref: childrenWrapperRef,\n\t\t\t\t\t...(isWeb ? webPressProps : mobilePressProps),\n\t\t\t\t})}\n\t\t\t</View>\n\t\t</>\n\t);\n};\n\nconst styles = StyleSheet.create({\n\ttooltip: {\n\t\talignSelf: 'flex-start',\n\t\tjustifyContent: 'center',\n\t\tpaddingHorizontal: 16,\n\t\theight: 32,\n\t\tmaxHeight: 32,\n\t},\n\tvisible: {\n\t\topacity: 1,\n\t},\n\thidden: {\n\t\topacity: 0,\n\t},\n});\n\nexport default Tooltip;\n"],"mappings":"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"}