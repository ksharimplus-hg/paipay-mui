{"version":3,"names":["Tooltip","children","enterTouchDelay","leaveTouchDelay","title","rest","theme","useInternalTheme","visible","setVisible","React","useState","measurement","setMeasurement","tooltip","measured","showTooltipTimer","useRef","hideTooltipTimer","childrenWrapperRef","touched","isWeb","Platform","OS","useEffect","current","clearTimeout","subscription","addEventListener","Dimensions","remove","handleOnLayout","nativeEvent","layout","measure","_x","_y","width","height","pageX","pageY","handleTouchStart","setTimeout","handleTouchEnd","mobilePressProps","onPress","useCallback","props","webPressProps","onHoverIn","onHoverOut","styles","backgroundColor","isV3","colors","onSurface","getTooltipPosition","borderRadius","roundness","hidden","color","surface","cloneElement","ref","StyleSheet","create","alignSelf","justifyContent","paddingHorizontal","maxHeight","opacity"],"sources":["Tooltip.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n\tDimensions,\n\tView,\n\tLayoutChangeEvent,\n\tStyleSheet,\n\tPlatform,\n} from 'react-native';\n\nimport { getTooltipPosition, Measurement } from './utils';\nimport { useInternalTheme } from '../../core/theming';\nimport { addEventListener } from '../../utils/addEventListener';\nimport Portal from '../Portal/Portal';\nimport Text from '../Typography/Text';\n\nexport type Props = {\n\t/**\n\t * Tooltip reference element. Needs to be able to hold a ref.\n\t */\n\tchildren: React.ReactElement;\n\t/**\n\t * The number of milliseconds a user must touch the element before showing the tooltip.\n\t */\n\tenterTouchDelay?: number;\n\t/**\n\t * The number of milliseconds after the user stops touching an element before hiding the tooltip.\n\t */\n\tleaveTouchDelay?: number;\n\t/**\n\t * Tooltip title\n\t */\n\ttitle: string;\n};\n\n/**\n * Tooltips display informative text when users hover over, focus on, or tap an element.\n *\n * Plain tooltips, when activated, display a text label identifying an element, such as a description of its function. Tooltips should include only short, descriptive text and avoid restating visible UI text.\n *\n * <div class=\"screenshots\">\n *   <figure>\n *     <img class=\"small\" src=\"screenshots/tooltip.png\" />\n *   </figure>\n * </div>\n *\n * ## Usage\n * ```js\n * import * as React from 'react';\n * import { IconButton, Tooltip } from 'react-native-paper';\n *\n * const MyComponent = () => (\n *   <Tooltip title=\"Selected Camera\">\n *     <IconButton icon=\"camera\" selected size={24} onPress={() => {}} />\n *   </Tooltip>\n * );\n *\n * export default MyComponent;\n * ```\n */\nconst Tooltip = ({\n\tchildren,\n\tenterTouchDelay = 500,\n\tleaveTouchDelay = 1500,\n\ttitle,\n\t...rest\n}: Props) => {\n\tconst theme = useInternalTheme();\n\tconst [visible, setVisible] = React.useState(false);\n\n\tconst [measurement, setMeasurement] = React.useState({\n\t\tchildren: {},\n\t\ttooltip: {},\n\t\tmeasured: false,\n\t});\n\tconst showTooltipTimer = React.useRef<NodeJS.Timeout>();\n\tconst hideTooltipTimer = React.useRef<NodeJS.Timeout>();\n\tconst childrenWrapperRef = React.useRef() as React.MutableRefObject<View>;\n\tconst touched = React.useRef(false);\n\n\tconst isWeb = Platform.OS === 'web';\n\n\tReact.useEffect(() => {\n\t\treturn () => {\n\t\t\tif (showTooltipTimer.current) {\n\t\t\t\tclearTimeout(showTooltipTimer.current);\n\t\t\t}\n\n\t\t\tif (hideTooltipTimer.current) {\n\t\t\t\tclearTimeout(hideTooltipTimer.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tconst subscription = addEventListener(Dimensions, 'change', () =>\n\t\t\tsetVisible(false)\n\t\t);\n\n\t\treturn () => subscription.remove();\n\t}, []);\n\n\tconst handleOnLayout = ({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n\t\tchildrenWrapperRef.current.measure(\n\t\t\t(_x, _y, width, height, pageX, pageY) => {\n\t\t\t\tsetMeasurement({\n\t\t\t\t\tchildren: { pageX, pageY, height, width },\n\t\t\t\t\ttooltip: { ...layout },\n\t\t\t\t\tmeasured: true,\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\tconst handleTouchStart = () => {\n\t\tif (hideTooltipTimer.current) {\n\t\t\tclearTimeout(hideTooltipTimer.current);\n\t\t}\n\n\t\tshowTooltipTimer.current = setTimeout(() => {\n\t\t\ttouched.current = true;\n\t\t\tsetVisible(true);\n\t\t}, enterTouchDelay) as unknown as NodeJS.Timeout;\n\t};\n\n\tconst handleTouchEnd = () => {\n\t\ttouched.current = false;\n\t\tif (showTooltipTimer.current) {\n\t\t\tclearTimeout(showTooltipTimer.current);\n\t\t}\n\n\t\thideTooltipTimer.current = setTimeout(() => {\n\t\t\tsetVisible(false);\n\t\t\tsetMeasurement({ children: {}, tooltip: {}, measured: false });\n\t\t}, leaveTouchDelay) as unknown as NodeJS.Timeout;\n\t};\n\n\tconst mobilePressProps = {\n\t\tonPress: React.useCallback(() => {\n\t\t\tif (touched.current) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\treturn children.props.onPress?.();\n\t\t\t}\n\t\t}, [children.props]),\n\t};\n\n\tconst webPressProps = {\n\t\tonHoverIn: () => {\n\t\t\thandleTouchStart();\n\t\t\tchildren.props.onHoverIn?.();\n\t\t},\n\t\tonHoverOut: () => {\n\t\t\thandleTouchEnd();\n\t\t\tchildren.props.onHoverOut?.();\n\t\t},\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{visible && (\n\t\t\t\t<Portal>\n\t\t\t\t\t<View\n\t\t\t\t\t\tonLayout={handleOnLayout}\n\t\t\t\t\t\tstyle={[\n\t\t\t\t\t\t\tstyles.tooltip,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbackgroundColor: theme.isV3\n\t\t\t\t\t\t\t\t\t? theme.colors.onSurface\n\t\t\t\t\t\t\t\t\t: theme.colors.tooltip,\n\t\t\t\t\t\t\t\t...getTooltipPosition(\n\t\t\t\t\t\t\t\t\tmeasurement as Measurement\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tborderRadius: theme.roundness,\n\t\t\t\t\t\t\t\t...(measurement.measured\n\t\t\t\t\t\t\t\t\t? styles.visible\n\t\t\t\t\t\t\t\t\t: styles.hidden),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t\ttestID=\"tooltip-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\taccessibilityLiveRegion=\"polite\"\n\t\t\t\t\t\t\tnumberOfLines={1}\n\t\t\t\t\t\t\tselectable={false}\n\t\t\t\t\t\t\tvariant=\"labelLarge\"\n\t\t\t\t\t\t\tstyle={{ color: theme.colors.surface }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</View>\n\t\t\t\t</Portal>\n\t\t\t)}\n\t\t\t<View\n\t\t\t\tonTouchStart={handleTouchStart}\n\t\t\t\tonTouchEnd={handleTouchEnd}\n\t\t\t\tonTouchCancel={handleTouchEnd}\n\t\t\t>\n\t\t\t\t{React.cloneElement(children, {\n\t\t\t\t\t...rest,\n\t\t\t\t\tref: childrenWrapperRef,\n\t\t\t\t\t...(isWeb ? webPressProps : mobilePressProps),\n\t\t\t\t})}\n\t\t\t</View>\n\t\t</>\n\t);\n};\n\nconst styles = StyleSheet.create({\n\ttooltip: {\n\t\talignSelf: 'flex-start',\n\t\tjustifyContent: 'center',\n\t\tpaddingHorizontal: 16,\n\t\theight: 32,\n\t\tmaxHeight: 32,\n\t},\n\tvisible: {\n\t\topacity: 1,\n\t},\n\thidden: {\n\t\topacity: 0,\n\t},\n});\n\nexport default Tooltip;\n"],"mappings":"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"}