{"version":3,"names":["Tooltip","children","enterTouchDelay","leaveTouchDelay","title","rest","theme","useInternalTheme","visible","setVisible","React","useState","measurement","setMeasurement","tooltip","measured","showTooltipTimer","useRef","hideTooltipTimer","childrenWrapperRef","touched","isWeb","Platform","OS","useEffect","current","clearTimeout","subscription","addEventListener","Dimensions","remove","handleOnLayout","nativeEvent","layout","measure","_x","_y","width","height","pageX","pageY","handleTouchStart","setTimeout","handleTouchEnd","mobilePressProps","onPress","useCallback","props","webPressProps","onHoverIn","onHoverOut","styles","backgroundColor","isV3","colors","onSurface","getTooltipPosition","borderRadius","roundness","hidden","color","surface","cloneElement","ref","StyleSheet","create","alignSelf","justifyContent","paddingHorizontal","maxHeight","opacity"],"sources":["Tooltip.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport {\r\n\tDimensions,\r\n\tView,\r\n\tLayoutChangeEvent,\r\n\tStyleSheet,\r\n\tPlatform,\r\n} from 'react-native';\r\n\r\nimport { getTooltipPosition, Measurement } from './utils';\r\nimport { useInternalTheme } from '../../core/theming';\r\nimport { addEventListener } from '../../utils/addEventListener';\r\nimport Portal from '../Portal/Portal';\r\nimport Text from '../Typography/Text';\r\n\r\nexport type Props = {\r\n\t/**\r\n\t * Tooltip reference element. Needs to be able to hold a ref.\r\n\t */\r\n\tchildren: React.ReactElement;\r\n\t/**\r\n\t * The number of milliseconds a user must touch the element before showing the tooltip.\r\n\t */\r\n\tenterTouchDelay?: number;\r\n\t/**\r\n\t * The number of milliseconds after the user stops touching an element before hiding the tooltip.\r\n\t */\r\n\tleaveTouchDelay?: number;\r\n\t/**\r\n\t * Tooltip title\r\n\t */\r\n\ttitle: string;\r\n};\r\n\r\n/**\r\n * Tooltips display informative text when users hover over, focus on, or tap an element.\r\n *\r\n * Plain tooltips, when activated, display a text label identifying an element, such as a description of its function. Tooltips should include only short, descriptive text and avoid restating visible UI text.\r\n *\r\n * <div class=\"screenshots\">\r\n *   <figure>\r\n *     <img class=\"small\" src=\"screenshots/tooltip.png\" />\r\n *   </figure>\r\n * </div>\r\n *\r\n * ## Usage\r\n * ```js\r\n * import * as React from 'react';\r\n * import { IconButton, Tooltip } from 'react-native-paper';\r\n *\r\n * const MyComponent = () => (\r\n *   <Tooltip title=\"Selected Camera\">\r\n *     <IconButton icon=\"camera\" selected size={24} onPress={() => {}} />\r\n *   </Tooltip>\r\n * );\r\n *\r\n * export default MyComponent;\r\n * ```\r\n */\r\nconst Tooltip = ({\r\n\tchildren,\r\n\tenterTouchDelay = 500,\r\n\tleaveTouchDelay = 1500,\r\n\ttitle,\r\n\t...rest\r\n}: Props) => {\r\n\tconst theme = useInternalTheme();\r\n\tconst [visible, setVisible] = React.useState(false);\r\n\r\n\tconst [measurement, setMeasurement] = React.useState({\r\n\t\tchildren: {},\r\n\t\ttooltip: {},\r\n\t\tmeasured: false,\r\n\t});\r\n\tconst showTooltipTimer = React.useRef<NodeJS.Timeout>();\r\n\tconst hideTooltipTimer = React.useRef<NodeJS.Timeout>();\r\n\tconst childrenWrapperRef = React.useRef() as React.MutableRefObject<View>;\r\n\tconst touched = React.useRef(false);\r\n\r\n\tconst isWeb = Platform.OS === 'web';\r\n\r\n\tReact.useEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tif (showTooltipTimer.current) {\r\n\t\t\t\tclearTimeout(showTooltipTimer.current);\r\n\t\t\t}\r\n\r\n\t\t\tif (hideTooltipTimer.current) {\r\n\t\t\t\tclearTimeout(hideTooltipTimer.current);\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst subscription = addEventListener(Dimensions, 'change', () =>\r\n\t\t\tsetVisible(false)\r\n\t\t);\r\n\r\n\t\treturn () => subscription.remove();\r\n\t}, []);\r\n\r\n\tconst handleOnLayout = ({ nativeEvent: { layout } }: LayoutChangeEvent) => {\r\n\t\tchildrenWrapperRef.current.measure(\r\n\t\t\t(_x, _y, width, height, pageX, pageY) => {\r\n\t\t\t\tsetMeasurement({\r\n\t\t\t\t\tchildren: { pageX, pageY, height, width },\r\n\t\t\t\t\ttooltip: { ...layout },\r\n\t\t\t\t\tmeasured: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleTouchStart = () => {\r\n\t\tif (hideTooltipTimer.current) {\r\n\t\t\tclearTimeout(hideTooltipTimer.current);\r\n\t\t}\r\n\r\n\t\tshowTooltipTimer.current = setTimeout(() => {\r\n\t\t\ttouched.current = true;\r\n\t\t\tsetVisible(true);\r\n\t\t}, enterTouchDelay) as unknown as NodeJS.Timeout;\r\n\t};\r\n\r\n\tconst handleTouchEnd = () => {\r\n\t\ttouched.current = false;\r\n\t\tif (showTooltipTimer.current) {\r\n\t\t\tclearTimeout(showTooltipTimer.current);\r\n\t\t}\r\n\r\n\t\thideTooltipTimer.current = setTimeout(() => {\r\n\t\t\tsetVisible(false);\r\n\t\t\tsetMeasurement({ children: {}, tooltip: {}, measured: false });\r\n\t\t}, leaveTouchDelay) as unknown as NodeJS.Timeout;\r\n\t};\r\n\r\n\tconst mobilePressProps = {\r\n\t\tonPress: React.useCallback(() => {\r\n\t\t\tif (touched.current) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn children.props.onPress?.();\r\n\t\t\t}\r\n\t\t}, [children.props]),\r\n\t};\r\n\r\n\tconst webPressProps = {\r\n\t\tonHoverIn: () => {\r\n\t\t\thandleTouchStart();\r\n\t\t\tchildren.props.onHoverIn?.();\r\n\t\t},\r\n\t\tonHoverOut: () => {\r\n\t\t\thandleTouchEnd();\r\n\t\t\tchildren.props.onHoverOut?.();\r\n\t\t},\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{visible && (\r\n\t\t\t\t<Portal>\r\n\t\t\t\t\t<View\r\n\t\t\t\t\t\tonLayout={handleOnLayout}\r\n\t\t\t\t\t\tstyle={[\r\n\t\t\t\t\t\t\tstyles.tooltip,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tbackgroundColor: theme.isV3\r\n\t\t\t\t\t\t\t\t\t? theme.colors.onSurface\r\n\t\t\t\t\t\t\t\t\t: theme.colors.tooltip,\r\n\t\t\t\t\t\t\t\t...getTooltipPosition(\r\n\t\t\t\t\t\t\t\t\tmeasurement as Measurement\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tborderRadius: theme.roundness,\r\n\t\t\t\t\t\t\t\t...(measurement.measured\r\n\t\t\t\t\t\t\t\t\t? styles.visible\r\n\t\t\t\t\t\t\t\t\t: styles.hidden),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\ttestID=\"tooltip-container\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\taccessibilityLiveRegion=\"polite\"\r\n\t\t\t\t\t\t\tnumberOfLines={1}\r\n\t\t\t\t\t\t\tselectable={false}\r\n\t\t\t\t\t\t\tvariant=\"labelLarge\"\r\n\t\t\t\t\t\t\tstyle={{ color: theme.colors.surface }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t</Portal>\r\n\t\t\t)}\r\n\t\t\t<View\r\n\t\t\t\tonTouchStart={handleTouchStart}\r\n\t\t\t\tonTouchEnd={handleTouchEnd}\r\n\t\t\t\tonTouchCancel={handleTouchEnd}\r\n\t\t\t>\r\n\t\t\t\t{React.cloneElement(children, {\r\n\t\t\t\t\t...rest,\r\n\t\t\t\t\tref: childrenWrapperRef,\r\n\t\t\t\t\t...(isWeb ? webPressProps : mobilePressProps),\r\n\t\t\t\t})}\r\n\t\t\t</View>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n\ttooltip: {\r\n\t\talignSelf: 'flex-start',\r\n\t\tjustifyContent: 'center',\r\n\t\tpaddingHorizontal: 16,\r\n\t\theight: 32,\r\n\t\tmaxHeight: 32,\r\n\t},\r\n\tvisible: {\r\n\t\topacity: 1,\r\n\t},\r\n\thidden: {\r\n\t\topacity: 0,\r\n\t},\r\n});\r\n\r\nexport default Tooltip;\r\n"],"mappings":"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"}