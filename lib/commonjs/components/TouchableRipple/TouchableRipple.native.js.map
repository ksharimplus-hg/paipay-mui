{"version":3,"names":["ANDROID_VERSION_LOLLIPOP","ANDROID_VERSION_PIE","TouchableRipple","style","background","borderless","disabled","disabledProp","rippleColor","underlayColor","children","theme","rest","showUnderlay","setShowUnderlay","React","useState","onPress","calculatedRippleColor","calculatedUnderlayColor","getTouchableRippleColors","useForeground","Platform","OS","Version","handlePressIn","e","onPressIn","handlePressOut","onPressOut","supported","styles","overflowHidden","color","foreground","Children","only","backgroundColor","StyleSheet","create","overflow","withInternalTheme"],"sources":["TouchableRipple.native.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n\tPressableAndroidRippleConfig,\n\tStyleProp,\n\tPlatform,\n\tViewStyle,\n\tStyleSheet,\n\tPressable,\n\tGestureResponderEvent,\n} from 'react-native';\n\nimport { getTouchableRippleColors } from './utils';\nimport { withInternalTheme } from '../../core/theming';\nimport type { InternalTheme } from '../../types';\n\nconst ANDROID_VERSION_LOLLIPOP = 21;\nconst ANDROID_VERSION_PIE = 28;\n\ntype Props = React.ComponentProps<typeof Pressable> & {\n\tborderless?: boolean;\n\tbackground?: PressableAndroidRippleConfig;\n\tdisabled?: boolean;\n\tonPress?: (e: GestureResponderEvent) => void | null;\n\trippleColor?: string;\n\tunderlayColor?: string;\n\tchildren: React.ReactNode;\n\tstyle?: StyleProp<ViewStyle>;\n\ttheme: InternalTheme;\n};\n\nconst TouchableRipple = ({\n\tstyle,\n\tbackground,\n\tborderless = false,\n\tdisabled: disabledProp,\n\trippleColor,\n\tunderlayColor,\n\tchildren,\n\ttheme,\n\t...rest\n}: Props) => {\n\tconst [showUnderlay, setShowUnderlay] = React.useState<boolean>(false);\n\n\tconst disabled = disabledProp || !rest.onPress;\n\tconst { calculatedRippleColor, calculatedUnderlayColor } =\n\t\tgetTouchableRippleColors({\n\t\t\ttheme,\n\t\t\trippleColor,\n\t\t\tunderlayColor,\n\t\t});\n\n\t// A workaround for ripple on Android P is to use useForeground + overflow: 'hidden'\n\t// https://github.com/facebook/react-native/issues/6480\n\tconst useForeground =\n\t\tPlatform.OS === 'android' &&\n\t\tPlatform.Version >= ANDROID_VERSION_PIE &&\n\t\tborderless;\n\n\tconst handlePressIn = (e: GestureResponderEvent) => {\n\t\tsetShowUnderlay(true);\n\t\trest.onPressIn?.(e);\n\t};\n\n\tconst handlePressOut = (e: GestureResponderEvent) => {\n\t\tsetShowUnderlay(false);\n\t\trest.onPressOut?.(e);\n\t};\n\n\tif (TouchableRipple.supported) {\n\t\treturn (\n\t\t\t<Pressable\n\t\t\t\t{...rest}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tstyle={[borderless && styles.overflowHidden, style]}\n\t\t\t\tandroid_ripple={\n\t\t\t\t\tbackground != null\n\t\t\t\t\t\t? background\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tcolor: calculatedRippleColor,\n\t\t\t\t\t\t\t\tborderless,\n\t\t\t\t\t\t\t\tforeground: useForeground,\n\t\t\t\t\t\t  }\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{React.Children.only(children)}\n\t\t\t</Pressable>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Pressable\n\t\t\t{...rest}\n\t\t\tdisabled={disabled}\n\t\t\tstyle={[\n\t\t\t\tborderless && styles.overflowHidden,\n\t\t\t\tshowUnderlay && { backgroundColor: calculatedUnderlayColor },\n\t\t\t\tstyle,\n\t\t\t]}\n\t\t\tonPressIn={handlePressIn}\n\t\t\tonPressOut={handlePressOut}\n\t\t>\n\t\t\t{React.Children.only(children)}\n\t\t</Pressable>\n\t);\n};\n\nTouchableRipple.supported =\n\tPlatform.OS === 'android' && Platform.Version >= ANDROID_VERSION_LOLLIPOP;\n\nconst styles = StyleSheet.create({\n\toverflowHidden: {\n\t\toverflow: 'hidden',\n\t},\n});\n\nexport default withInternalTheme(TouchableRipple);\n"],"mappings":";;;;;;AAAA;AACA;AAUA;AACA;AAAuD;AAAA;AAAA;AAGvD,MAAMA,wBAAwB,GAAG,EAAE;AACnC,MAAMC,mBAAmB,GAAG,EAAE;AAc9B,MAAMC,eAAe,GAAG,QAUX;EAAA,IAVY;IACxBC,KAAK;IACLC,UAAU;IACVC,UAAU,GAAG,KAAK;IAClBC,QAAQ,EAAEC,YAAY;IACtBC,WAAW;IACXC,aAAa;IACbC,QAAQ;IACRC,KAAK;IACL,GAAGC;EACG,CAAC;EACP,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGC,KAAK,CAACC,QAAQ,CAAU,KAAK,CAAC;EAEtE,MAAMV,QAAQ,GAAGC,YAAY,IAAI,CAACK,IAAI,CAACK,OAAO;EAC9C,MAAM;IAAEC,qBAAqB;IAAEC;EAAwB,CAAC,GACvD,IAAAC,+BAAwB,EAAC;IACxBT,KAAK;IACLH,WAAW;IACXC;EACD,CAAC,CAAC;;EAEH;EACA;EACA,MAAMY,aAAa,GAClBC,qBAAQ,CAACC,EAAE,KAAK,SAAS,IACzBD,qBAAQ,CAACE,OAAO,IAAIvB,mBAAmB,IACvCI,UAAU;EAEX,MAAMoB,aAAa,GAAIC,CAAwB,IAAK;IAAA;IACnDZ,eAAe,CAAC,IAAI,CAAC;IACrB,mBAAAF,IAAI,CAACe,SAAS,oDAAd,qBAAAf,IAAI,EAAac,CAAC,CAAC;EACpB,CAAC;EAED,MAAME,cAAc,GAAIF,CAAwB,IAAK;IAAA;IACpDZ,eAAe,CAAC,KAAK,CAAC;IACtB,oBAAAF,IAAI,CAACiB,UAAU,qDAAf,sBAAAjB,IAAI,EAAcc,CAAC,CAAC;EACrB,CAAC;EAED,IAAIxB,eAAe,CAAC4B,SAAS,EAAE;IAC9B,oBACC,oBAAC,sBAAS,eACLlB,IAAI;MACR,QAAQ,EAAEN,QAAS;MACnB,KAAK,EAAE,CAACD,UAAU,IAAI0B,MAAM,CAACC,cAAc,EAAE7B,KAAK,CAAE;MACpD,cAAc,EACbC,UAAU,IAAI,IAAI,GACfA,UAAU,GACV;QACA6B,KAAK,EAAEf,qBAAqB;QAC5Bb,UAAU;QACV6B,UAAU,EAAEb;MACZ;IACH,IAEAN,KAAK,CAACoB,QAAQ,CAACC,IAAI,CAAC1B,QAAQ,CAAC,CACnB;EAEd;EAEA,oBACC,oBAAC,sBAAS,eACLE,IAAI;IACR,QAAQ,EAAEN,QAAS;IACnB,KAAK,EAAE,CACND,UAAU,IAAI0B,MAAM,CAACC,cAAc,EACnCnB,YAAY,IAAI;MAAEwB,eAAe,EAAElB;IAAwB,CAAC,EAC5DhB,KAAK,CACJ;IACF,SAAS,EAAEsB,aAAc;IACzB,UAAU,EAAEG;EAAe,IAE1Bb,KAAK,CAACoB,QAAQ,CAACC,IAAI,CAAC1B,QAAQ,CAAC,CACnB;AAEd,CAAC;AAEDR,eAAe,CAAC4B,SAAS,GACxBR,qBAAQ,CAACC,EAAE,KAAK,SAAS,IAAID,qBAAQ,CAACE,OAAO,IAAIxB,wBAAwB;AAE1E,MAAM+B,MAAM,GAAGO,uBAAU,CAACC,MAAM,CAAC;EAChCP,cAAc,EAAE;IACfQ,QAAQ,EAAE;EACX;AACD,CAAC,CAAC;AAAC,eAEY,IAAAC,0BAAiB,EAACvC,eAAe,CAAC;AAAA"}