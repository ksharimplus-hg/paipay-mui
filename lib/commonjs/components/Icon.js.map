{"version":3,"names":["isImageSource","source","Object","prototype","hasOwnProperty","call","uri","Platform","OS","startsWith","test","getIconId","isValidIcon","isEqualIcon","a","b","Icon","color","size","theme","rest","direction","I18nManager","getConstants","isRTL","s","iconColor","isV3","colors","onSurface","text","transform","scaleX","width","height","tintColor","resizeMode","accessibilityProps","icon","name","withInternalTheme"],"sources":["Icon.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport {\r\n\tI18nManager,\r\n\tImage,\r\n\tImageSourcePropType,\r\n\tPlatform,\r\n} from 'react-native';\r\n\r\nimport { accessibilityProps } from './MaterialCommunityIcon';\r\nimport { Consumer as SettingsConsumer } from '../core/settings';\r\nimport { withInternalTheme } from '../core/theming';\r\nimport type { InternalTheme } from '../types';\r\n\r\ntype IconSourceBase = string | ImageSourcePropType;\r\n\r\nexport type IconSource =\r\n\t| IconSourceBase\r\n\t| Readonly<{ source: IconSourceBase; direction: 'rtl' | 'ltr' | 'auto' }>\r\n\t| ((props: IconProps & { color: string }) => React.ReactNode);\r\n\r\ntype IconProps = {\r\n\tsize: number;\r\n\tallowFontScaling?: boolean;\r\n};\r\n\r\ntype Props = IconProps & {\r\n\tcolor?: string;\r\n\tsource: any;\r\n\t/**\r\n\t * @optional\r\n\t */\r\n\ttheme: InternalTheme;\r\n};\r\n\r\nconst isImageSource = (source: any) =>\r\n\t// source is an object with uri\r\n\t(typeof source === 'object' &&\r\n\t\tsource !== null &&\r\n\t\tObject.prototype.hasOwnProperty.call(source, 'uri') &&\r\n\t\ttypeof source.uri === 'string') ||\r\n\t// source is a module, e.g. - require('image')\r\n\ttypeof source === 'number' ||\r\n\t// image url on web\r\n\t(Platform.OS === 'web' &&\r\n\t\ttypeof source === 'string' &&\r\n\t\t(source.startsWith('data:image') ||\r\n\t\t\t/\\.(bmp|jpg|jpeg|png|gif|svg)$/.test(source)));\r\n\r\nconst getIconId = (source: any) => {\r\n\tif (\r\n\t\ttypeof source === 'object' &&\r\n\t\tsource !== null &&\r\n\t\tObject.prototype.hasOwnProperty.call(source, 'uri') &&\r\n\t\ttypeof source.uri === 'string'\r\n\t) {\r\n\t\treturn source.uri;\r\n\t}\r\n\r\n\treturn source;\r\n};\r\n\r\nexport const isValidIcon = (source: any) =>\r\n\ttypeof source === 'string' ||\r\n\ttypeof source === 'function' ||\r\n\tisImageSource(source);\r\n\r\nexport const isEqualIcon = (a: any, b: any) =>\r\n\ta === b || getIconId(a) === getIconId(b);\r\n\r\nconst Icon = ({ source, color, size, theme, ...rest }: Props) => {\r\n\tconst direction =\r\n\t\ttypeof source === 'object' && source.direction && source.source\r\n\t\t\t? source.direction === 'auto'\r\n\t\t\t\t? I18nManager.getConstants().isRTL\r\n\t\t\t\t\t? 'rtl'\r\n\t\t\t\t\t: 'ltr'\r\n\t\t\t\t: source.direction\r\n\t\t\t: null;\r\n\tconst s =\r\n\t\ttypeof source === 'object' && source.direction && source.source\r\n\t\t\t? source.source\r\n\t\t\t: source;\r\n\tconst iconColor =\r\n\t\tcolor || (theme.isV3 ? theme.colors.onSurface : theme.colors.text);\r\n\r\n\tif (isImageSource(s)) {\r\n\t\treturn (\r\n\t\t\t<Image\r\n\t\t\t\t{...rest}\r\n\t\t\t\tsource={s}\r\n\t\t\t\tstyle={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttransform: [{ scaleX: direction === 'rtl' ? -1 : 1 }],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twidth: size,\r\n\t\t\t\t\t\theight: size,\r\n\t\t\t\t\t\ttintColor: color,\r\n\t\t\t\t\t\tresizeMode: 'contain',\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\t{...accessibilityProps}\r\n\t\t\t\taccessibilityIgnoresInvertColors\r\n\t\t\t/>\r\n\t\t);\r\n\t} else if (typeof s === 'string') {\r\n\t\treturn (\r\n\t\t\t<SettingsConsumer>\r\n\t\t\t\t{({ icon }) => {\r\n\t\t\t\t\treturn icon({\r\n\t\t\t\t\t\tname: s,\r\n\t\t\t\t\t\tcolor: iconColor,\r\n\t\t\t\t\t\tsize,\r\n\t\t\t\t\t\tdirection,\r\n\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t</SettingsConsumer>\r\n\t\t);\r\n\t} else if (typeof s === 'function') {\r\n\t\treturn s({ color: iconColor, size, direction });\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default withInternalTheme(Icon);\r\n"],"mappings":"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"}