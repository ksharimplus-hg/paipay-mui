{"version":3,"names":["PortalContext","React","createContext","PortalHost","Component","manager","children","key","nextKey","mount","queue","push","type","update","op","index","findIndex","o","unmount","componentDidMount","length","action","pop","render","styles","container","props","setManager","StyleSheet","create","flex"],"sources":["PortalHost.tsx"],"sourcesContent":["import * as React from 'react';\nimport { View, StyleSheet } from 'react-native';\n\nimport PortalManager from './PortalManager';\n\nexport type Props = {\n\tchildren: React.ReactNode;\n};\n\ntype Operation =\n\t| { type: 'mount'; key: number; children: React.ReactNode }\n\t| { type: 'update'; key: number; children: React.ReactNode }\n\t| { type: 'unmount'; key: number };\n\nexport type PortalMethods = {\n\tmount: (children: React.ReactNode) => number;\n\tupdate: (key: number, children: React.ReactNode) => void;\n\tunmount: (key: number) => void;\n};\n\nexport const PortalContext = React.createContext<PortalMethods>(null as any);\n\n/**\n * Portal host renders all of its children `Portal` elements.\n * For example, you can wrap a screen in `Portal.Host` to render items above the screen.\n * If you're using the `Provider` component, it already includes `Portal.Host`.\n *\n * ## Usage\n * ```js\n * import * as React from 'react';\n * import { Text } from 'react-native';\n * import { Portal } from 'react-native-paper';\n *\n * const MyComponent = () => (\n *   <Portal.Host>\n *     <Text>Content of the app</Text>\n *   </Portal.Host>\n * );\n *\n * export default MyComponent;\n * ```\n *\n * Here any `Portal` elements under `<App />` are rendered alongside `<App />` and will appear above `<App />` like a `Modal`.\n */\nexport default class PortalHost extends React.Component<Props> {\n\tstatic displayName = 'Portal.Host';\n\n\tcomponentDidMount() {\n\t\tconst manager = this.manager;\n\t\tconst queue = this.queue;\n\n\t\twhile (queue.length && manager) {\n\t\t\tconst action = queue.pop();\n\t\t\tif (action) {\n\t\t\t\t// eslint-disable-next-line default-case\n\t\t\t\tswitch (action.type) {\n\t\t\t\t\tcase 'mount':\n\t\t\t\t\t\tmanager.mount(action.key, action.children);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'update':\n\t\t\t\t\t\tmanager.update(action.key, action.children);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'unmount':\n\t\t\t\t\t\tmanager.unmount(action.key);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate setManager = (manager: PortalManager | undefined | null) => {\n\t\tthis.manager = manager;\n\t};\n\n\tprivate mount = (children: React.ReactNode) => {\n\t\tconst key = this.nextKey++;\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.mount(key, children);\n\t\t} else {\n\t\t\tthis.queue.push({ type: 'mount', key, children });\n\t\t}\n\n\t\treturn key;\n\t};\n\n\tprivate update = (key: number, children: React.ReactNode) => {\n\t\tif (this.manager) {\n\t\t\tthis.manager.update(key, children);\n\t\t} else {\n\t\t\tconst op: Operation = { type: 'mount', key, children };\n\t\t\tconst index = this.queue.findIndex(\n\t\t\t\t(o) =>\n\t\t\t\t\to.type === 'mount' || (o.type === 'update' && o.key === key)\n\t\t\t);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.queue[index] = op;\n\t\t\t} else {\n\t\t\t\tthis.queue.push(op as Operation);\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate unmount = (key: number) => {\n\t\tif (this.manager) {\n\t\t\tthis.manager.unmount(key);\n\t\t} else {\n\t\t\tthis.queue.push({ type: 'unmount', key });\n\t\t}\n\t};\n\n\tprivate nextKey = 0;\n\tprivate queue: Operation[] = [];\n\tprivate manager: PortalManager | null | undefined;\n\n\trender() {\n\t\treturn (\n\t\t\t<PortalContext.Provider\n\t\t\t\tvalue={{\n\t\t\t\t\tmount: this.mount,\n\t\t\t\t\tupdate: this.update,\n\t\t\t\t\tunmount: this.unmount,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{/* Need collapsable=false here to clip the elevations, otherwise they appear above Portal components */}\n\t\t\t\t<View\n\t\t\t\t\tstyle={styles.container}\n\t\t\t\t\tcollapsable={false}\n\t\t\t\t\tpointerEvents=\"box-none\"\n\t\t\t\t>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</View>\n\t\t\t\t<PortalManager ref={this.setManager} />\n\t\t\t</PortalContext.Provider>\n\t\t);\n\t}\n}\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1,\n\t},\n});\n"],"mappings":"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"}